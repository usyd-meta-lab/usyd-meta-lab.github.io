<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>USYD Meta Lab • Task Library</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --fg:#0f172a; --muted:#475569; --border:#e5e7eb; --bg:#f9fafb;
      --radius:14px; --space:16px; --maxw:1100px;
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--fg)}
    header{position:sticky;top:0;background:#fffbd; backdrop-filter: blur(8px); border-bottom:1px solid var(--border)}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:18px var(--space)}
    .title{display:flex;align-items:center;gap:10px}
    .title h1{margin:0;font-size:22px}
    .title small{color:var(--muted)}
    header img{height:40px}

    .controls{display:grid;grid-template-columns:2fr 1fr;gap:10px;margin-top:12px}
    @media (max-width:720px){ .controls{grid-template-columns:1fr} }
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input[type="search"]{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#fff}

    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:16px}
    @media (max-width:1100px){ .grid{grid-template-columns:repeat(3,1fr)} }
    @media (max-width:820px){ .grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:520px){ .grid{grid-template-columns:1fr} }

    .card{display:block;border:1px solid var(--border);border-radius:var(--radius);background:#fff;overflow:hidden;text-decoration:none;color:inherit;box-shadow:0 1px 2px rgba(0,0,0,.04);transition:transform 120ms ease,box-shadow 180ms ease,border-color 180ms ease}
    .card:hover,.card:focus{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.08);border-color:#d1d5db;outline:none}
    .thumb{aspect-ratio:16/9;background:#f3f4f6;display:block;width:100%;object-fit:cover}
    .card h3{margin:10px 12px 12px;font-size:16px;line-height:1.3}
    .count{color:var(--muted);font-size:13px;margin-top:6px}
    .empty{margin-top:20px;color:var(--muted);text-align:center;border:1px dashed var(--border);border-radius:var(--radius);padding:32px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="title">
        <img src="https://usyd-meta-lab.github.io/images/logo.PNG" alt="USYD Meta Lab Logo">
        <h1>USYD Meta Lab — Task Library</h1>
        <small id="updated"></small>
      </div>

      <div class="controls" role="region" aria-label="Search">
        <div>
          <label for="q">Search tasks (name or tags)</label>
          <input id="q" type="search" placeholder="e.g., n-back, stroop, memory…" autocomplete="off">
        </div>
        <div>
          <label for="sort">Sort</label>
          <select id="sort">
            <option value="name_asc" selected>Name A→Z</option>
            <option value="name_desc">Name Z→A</option>
            <option value="newest">Newest first</option>
          </select>
        </div>
      </div>

      <div class="count" id="count">Loading…</div>
    </div>
  </header>

  <main class="wrap">
    <section id="grid" class="grid" aria-live="polite"></section>
    <div id="empty" class="empty" hidden>No tasks match your search.</div>
  </main>

  <script>
    // ------------------- DATA: add/edit tasks here -------------------
    // Each task: { id, name, url, img, tags?, added? }
    const TASKS = [
      {
        id: "stroop",
        name: "Stroop",
        url: "#",                   // TODO: link to task
        img: "https://placehold.co/640x360?text=Stroop", // TODO: replace with task image
        tags: ["attention","color","inhibition"],
        added: "2025-09-01"
      },
      {
        id: "nback",
        name: "N-Back",
        url: "#",
        img: "https://placehold.co/640x360?text=N-Back",
        tags: ["working memory","updating"],
        added: "2025-08-20"
      },
      {
        id: "flanker",
        name: "Flanker",
        url: "#",
        img: "https://placehold.co/640x360?text=Flanker",
        tags: ["attention","conflict"],
        added: "2025-07-15"
      }
    ];
    // ----------------------------------------------------------------

    const els = {
      q: document.getElementById('q'),
      sort: document.getElementById('sort'),
      grid: document.getElementById('grid'),
      count: document.getElementById('count'),
      empty: document.getElementById('empty'),
      updated: document.getElementById('updated'),
    };

    function normalize(s){ return (s||"").toString().toLowerCase(); }

    function matches(t){
      const q = normalize(els.q.value);
      if(!q) return true;
      const hay = [t.name, ...(t.tags||[])].map(normalize).join(" ");
      return hay.includes(q);
    }

    function sortTasks(list){
      const m = els.sort.value;
      const byNameAsc = (a,b)=> normalize(a.name).localeCompare(normalize(b.name));
      const byNameDesc = (a,b)=> normalize(b.name).localeCompare(normalize(a.name));
      const byNewest = (a,b)=> String(b.added||"").localeCompare(String(a.added||""));
      if(m==="name_desc") return list.sort(byNameDesc);
      if(m==="newest") return list.sort(byNewest);
      return list.sort(byNameAsc);
    }

    function card(t){
      const alt = `Preview of ${t.name} task`;
      return `
        <a class="card" href="${t.url}" target="_blank" rel="noopener" title="${escapeHTML(t.name)}">
          <img class="thumb" src="${t.img}" alt="${escapeHTML(alt)}" loading="lazy">
          <h3>${escapeHTML(t.name)}</h3>
        </a>
      `;
    }

    function render(){
      const list = sortTasks(TASKS.filter(matches));
      els.count.textContent = `${list.length} task${list.length===1?'':'s'}`;
      if(!list.length){
        els.grid.innerHTML = "";
        els.empty.hidden = false;
        return;
      }
      els.empty.hidden = true;
      els.grid.innerHTML = list.map(card).join("");
    }

    function escapeHTML(s){
      return (s??'').toString()
        .replaceAll('&','&amp;').replaceAll('<','&lt;')
        .replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'","&#39;");
    }

    // init
    els.q.addEventListener('input', render);
    els.sort.addEventListener('change', render);
    // show last updated (max of "added" dates)
    const dates = TASKS.map(t=>t.added).filter(Boolean).sort().reverse();
    if(dates[0]) els.updated.textContent = `Updated: ${dates[0]}`;
    render();
  </script>
</body>
</html>