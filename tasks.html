<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>USYD Meta Lab • Task Library</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --fg:#0f172a; --muted:#475569; --border:#e5e7eb; --bg:#f9fafb;
      --radius:14px; --space:16px; --maxw:1100px;
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--fg)}
    header{position:sticky;top:0;background:#fffbd; backdrop-filter: blur(8px); border-bottom:1px solid var(--border)}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:18px var(--space)}
    .title{display:flex;align-items:center;gap:10px}
    .title h1{margin:0;font-size:22px}
    .title small{color:var(--muted)}
    header img{height:40px}

    .controls{display:grid;grid-template-columns:2fr 1fr;gap:10px;margin-top:12px}
    @media (max-width:720px){ .controls{grid-template-columns:1fr} }
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input[type="search"]{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#fff}

    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:16px}
    @media (max-width:1100px){ .grid{grid-template-columns:repeat(3,1fr)} }
    @media (max-width:820px){ .grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:520px){ .grid{grid-template-columns:1fr} }

    .card{
      position:relative;
      display:block;
      border:1px solid var(--border);
      border-radius:var(--radius);
      background:#fff;
      overflow:hidden;
      text-decoration:none;
      color:inherit;
      box-shadow:0 1px 2px rgba(0,0,0,.04);
      transition:transform 120ms ease,box-shadow 180ms ease,border-color 180ms ease;
    }
    .card:hover,.card:focus{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.08);border-color:#d1d5db;outline:none}
    .stretched{
      position:absolute;
      inset:0;
      z-index:1;
      /* make the overlay link accessible but visually hidden */
      color:transparent;
      text-indent:-9999px;
    }
    .repo-btn{
      position:absolute;
      right:10px;
      bottom:10px;
      z-index:2;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:24px;
      height:24px;
      border-radius:8px;
      border:1px solid rgba(0,0,0,0.2);
      background:rgba(255,255,255,0.4);
      backdrop-filter: blur(4px);
      box-shadow:0 1px 2px rgba(0,0,0,0.04);
      transition:transform 120ms ease, box-shadow 180ms ease, background 120ms ease, border-color 180ms ease;
    }
    .repo-btn:hover,.repo-btn:focus{
      transform:translateY(-1px);
      box-shadow:0 6px 18px rgba(0,0,0,0.08);
      background: rgba(0,0,0,0.02);
      border-color: rgba(0,0,0,0.12);
      outline:none;
    }
    .repo-btn svg{
      width:14px;
      height:14px;
      display:block;
      fill: none;
      stroke: black;
      stroke-width: 2;
    }

    .thumb{aspect-ratio:16/9;background:#f3f4f6;display:block;width:100%;object-fit:cover}
    .card h3{margin:10px 12px 12px;font-size:16px;line-height:1.3}
    .count{color:var(--muted);font-size:13px;margin-top:6px}
    .empty{margin-top:20px;color:var(--muted);text-align:center;border:1px dashed var(--border);border-radius:var(--radius);padding:32px}
    .ml-auto { margin-left: auto; }
    .new-task {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #ffffff;
      color: var(--fg);
      text-decoration: none;
      font-weight: 600;
      transition: transform 120ms ease, box-shadow 180ms ease, background 120ms ease, border-color 180ms ease;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    }
    .new-task:hover, .new-task:focus {
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      background: rgba(0,0,0,0.02);
      border-color: rgba(0,0,0,0.12);
      outline: none;
    }
    .new-task svg { width: 16px; height: 16px; display:block; }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="title">
        <img src="https://usyd-meta-lab.github.io/images/logo.PNG" alt="USYD Meta Lab Logo">
        <h1>Task Library</h1>
        <small id="updated"></small>
         <a class="new-task ml-auto" href="https://github.com/usyd-meta-lab/jsPsych-template" target="_blank" rel="noopener" aria-label="Suggest a new task" title="Suggest a new task">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
          </svg>
          <span>New Task</span>
        </a>
      </div>

      <div class="controls" role="region" aria-label="Search">
        <div>
          <label for="q">Search tasks (name or tags)</label>
          <input id="q" type="search" placeholder="e.g., n-back, stroop, memory…" autocomplete="off">
        </div>
        <div>
          <label for="sort">Sort</label>
          <select id="sort">
            <option value="name_asc" selected>Name A→Z</option>
            <option value="name_desc">Name Z→A</option>
            <option value="newest">Newest first</option>
          </select>
        </div>
      </div>

      <div class="count" id="count">Loading…</div>
    </div>
  </header>

  <main class="wrap">
    <section id="grid" class="grid" aria-live="polite"></section>
    <div id="empty" class="empty" hidden>No tasks match your search.</div>
  </main>

  <script>
    // ------------------- DATA: add/edit tasks here -------------------
    // Each task: { id, name, url, img, tags?, added?, repo? }
    const TASKS = [
      {
        id: "shape-categorisation",
        name: "Shape Categorisation",
        url: "http://usyd-meta-lab.github.io/shape-categorisation",
        img: "images/task thumbs/shape-categorisation.png",
        tags: ["categorisation","learning","strategy"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/shape-categorisation" 
      },
       {
        id: "swaps",
        name: "Shape Swaps",
        url: "http://usyd-meta-lab.github.io/swaps",
        img: "images/task thumbs/swaps.png",
        tags: ["reasoning","intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/swaps" 
      },
       {
        id: "anagrams",
        name: "Anagrams",
        url: "http://usyd-meta-lab.github.io/anagrams",
        img: "images/task thumbs/anagrams.png",
        tags: ["reasoning","intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/anagrams" 
      },
       {
        id: "RPM",
        name: "Raven's Progressive Matrices",
        url: "http://usyd-meta-lab.github.io/RPM",
        img: "images/task thumbs/RPM.png",
        tags: ["reasoning", "matrix","intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/RPM" 
      },
      {
        id: "LST",
        name: "Latin Square Task",
        url: "http://usyd-meta-lab.github.io/LST",
        img: "images/task thumbs/LST.png",
        tags: ["reasoning", ,"intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/LST" 
      },
       {
        id: "micro-world",
        name: "Micro-world Task",
        url: "http://usyd-meta-lab.github.io/micro-world",
        img: "images/task thumbs/micro-world.png",
        tags: ["complex problem solving", "dynamic assessment","intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/micro-world" 
      },
       {
        id: "CPS",
        name: "Complex Problem Solving Task",
        url: "http://usyd-meta-lab.github.io/CPS",
        img: "images/task thumbs/CPS.png",
        tags: ["complex problem solving", "dynamic assessment","intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/CPS" 
      },
      {
        id: "flexible-inference",
        name: "Flexible Inference",
        url: "http://usyd-meta-lab.github.io/flexible-inference/exp-demo.html",
        img: "images/task thumbs/flexible-inference.png",
        tags: ["reasoning", "dynamic assessment","intelligence", "flexibility"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/flexible-inference" 
      },
       {
        id: "bongard",
        name: "Bongard Task",
        url: "http://usyd-meta-lab.github.io/bongard/exp-demo.html",
        img: "images/task thumbs/bongard.png",
        tags: ["reasoning", "dynamic assessment","intelligence", "flexibility"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/bongard" 
      },
       {
        id: "flexible-mapping",
        name: "Flexible Mapping",
        url: "http://usyd-meta-lab.github.io/flexible-mapping/exp-demo.html",
        img: "images/task thumbs/flexible-mapping.png",
        tags: ["reasoning", "dynamic assessment","intelligence", "flexibility"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/flexible-mapping" 
      },
      {
        id: "n-back",
        name: "N-back",
        url: "http://usyd-meta-lab.github.io/n-back",
        img: "images/task thumbs/n-back.png",
        tags: ["working memory", "executive functions"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/n-back" 
      },
      {
        id: "flanker",
        name: "Flanker Task",
        url: "http://usyd-meta-lab.github.io/flanker",
        img: "images/task thumbs/flanker.png",
        tags: ["inhibition", "executive functions"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/flanker" 
      },
      {
        id: "paired-associates",
        name: "Paired Associates",
        url: "http://usyd-meta-lab.github.io/paired-associates",
        img: "images/task thumbs/paired-associates.png",
        tags: ["memory", "word-pairs","metacognition", "JOL"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/paired-associates" 
      },
       {
        id: "RMT",
        name: "Relational Monitoring",
        url: "http://usyd-meta-lab.github.io/RMT",
        img: "images/task thumbs/RMT.png",
        tags: ["reasoning", "relational learning","intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/RMT" 
      },
        {
        id: "JACBART",
        name: "JACBART",
        url: "http://usyd-meta-lab.github.io/JACBART",
        img: "images/task thumbs/JACBART.png",
        tags: ["EI","emotional intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/JACBART" 
      },
      {
        id: "STEU",
        name: "STEU",
        url: "http://usyd-meta-lab.github.io/STEU",
        img: "images/task thumbs/STEU.png",
        tags: ["EI","emotional intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/STEU" 
      },
       {
        id: "emotion-identification-task",
        name: "Emotion Identification Task",
        url: "http://usyd-meta-lab.github.io/emotion-identification-task",
        img: "images/task thumbs/emotion-identification-task.png",
        tags: ["emotion","affect", "metacognition", "meta-emotion", "emotional awareness"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/emotion-identification-task" 
      },
       {
        id: "meta-emotion-task",
        name: "Meta-emotion Task",
        url: "http://usyd-meta-lab.github.io/meta-emotion-task",
        img: "images/task thumbs/meta-emotion-task.png",
        tags: ["emotion","affect", "metacognition", "meta-emotion", "emotional awareness"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/meta-emotion-task" 
      },
       {
        id: "STEM",
        name: "STEM",
        url: "http://usyd-meta-lab.github.io/STEM",
        img: "images/task thumbs/STEM.png",
        tags: ["EI","emotional intelligence"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/STEM" 
      },
       {
        id: "sham-emotion",
        name: "Sham Emotion Regulation",
        url: "http://usyd-meta-lab.github.io/sham-emotion",
        img: "images/task thumbs/sham-emotion.png",
        tags: ["causal illusions", "outcome density","emotional regulation"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/sham-emotion" 
      },
       {
        id: "rating-task",
        name: "Rating Task",
        url: "http://usyd-meta-lab.github.io/rating-task",
        img: "images/task thumbs/rating-task.png",
        tags: ["perception","metacognition"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/rating-task" 
      },
      {
        id: "causal-induction",
        name: "Causal Induction",
        url: "http://usyd-meta-lab.github.io/causal-induction",
        img: "images/task thumbs/causal-induction.png",
        tags: ["contingency learning","causal learning"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/causal-induction" 
      },
      {
        id: "three-line",
        name: "Three Line Task",
        url: "http://usyd-meta-lab.github.io/three-line-task",
        img: "images/task thumbs/three-line-task.png",
        tags: ["categorisation","learning"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/three-line-task" 
      },
      {
        id: "perceptual-discrimination",
        name: "Perceptual Discrimination Task",
        url: "http://usyd-meta-lab.github.io/Perceptual-Discrimination-Task",
        img: "images/task thumbs/Perceptual-Discrimination-Task.png",
        tags: ["metacognition","perception"],
        added: "2025-09-02",
        repo: "https://github.com/usyd-meta-lab/Perceptual-Discrimination-Task"
      }
    ];
    // ----------------------------------------------------------------



    const els = {
      q: document.getElementById('q'),
      sort: document.getElementById('sort'),
      grid: document.getElementById('grid'),
      count: document.getElementById('count'),
      empty: document.getElementById('empty'),
      updated: document.getElementById('updated'),
    };

    function normalize(s){ return (s||"").toString().toLowerCase(); }

    function matches(t){
      const q = normalize(els.q.value);
      if(!q) return true;
      const hay = [t.name, ...(t.tags||[])].map(normalize).join(" ");
      return hay.includes(q);
    }

    function sortTasks(list){
      const m = els.sort.value;
      const byNameAsc = (a,b)=> normalize(a.name).localeCompare(normalize(b.name));
      const byNameDesc = (a,b)=> normalize(b.name).localeCompare(normalize(a.name));
      const byNewest = (a,b)=> String(b.added||"").localeCompare(String(a.added||""));
      if(m==="name_desc") return list.sort(byNameDesc);
      if(m==="newest") return list.sort(byNewest);
      return list.sort(byNameAsc);
    }

    function card(t){
      const alt = `Preview of ${t.name} task`;
      const title = escapeHTML(t.name);
      const repoBtn = t.repo ? `
        <a class="repo-btn" href="${t.repo}" target="_blank" rel="noopener" aria-label="Open GitHub repository for ${title}">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M10 6l1.5 1.5h7A1.5 1.5 0 0120 9v8a1.5 1.5 0 01-1.5 1.5h-13A1.5 1.5 0 014 17V7A1.5 1.5 0 015.5 5.5h3A1.5 1.5 0 0110 6z" fill="currentColor"/>
          </svg>
        </a>
      ` : "";
      return `
        <div class="card" title="${title}">
          <img class="thumb" src="${t.img}" alt="${escapeHTML(alt)}" loading="lazy">
          <h3>${title}</h3>
          <a class="stretched" href="${t.url}" target="_blank" rel="noopener">Open ${title}</a>
          ${repoBtn}
        </div>
      `;
    }

    function render(){
      const list = sortTasks(TASKS.filter(matches));
      els.count.textContent = `${list.length} task${list.length===1?'':'s'}`;
      if(!list.length){
        els.grid.innerHTML = "";
        els.empty.hidden = false;
        return;
      }
      els.empty.hidden = true;
      els.grid.innerHTML = list.map(card).join("");
    }

    function escapeHTML(s){
      return (s??'').toString()
        .replaceAll('&','&amp;').replaceAll('<','&lt;')
        .replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'","&#39;");
    }

    // init
    els.q.addEventListener('input', render);
    els.sort.addEventListener('change', render);
    // show last updated (max of "added" dates)
    const dates = TASKS.map(t=>t.added).filter(Boolean).sort().reverse();
    if(dates[0]) els.updated.textContent = `Updated: ${dates[0]}`;
    render();
  </script>
</body>
</html>